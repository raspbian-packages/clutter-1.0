From: Rico Tzschichholz <ricotz@ubuntu.com>
Subject: Eglx and glx should share the same SONAME, for compatibility reasons.
Last-Update: 2012-02-23

Based on: http://bugzilla.clutter-project.org/show_bug.cgi?id=2276

Index: clutter-1.0-1.9.12/clutter/Makefile.am
===================================================================
--- clutter-1.0-1.9.12.orig/clutter/Makefile.am
+++ clutter-1.0-1.9.12/clutter/Makefile.am
@@ -632,10 +632,14 @@
 clutteregl_includedir = $(clutter_includedir)/egl
 clutteregl_include_HEADERS = $(egl_source_h)
 
-clutter-egl-$(CLUTTER_API_VERSION).pc: clutter-$(CLUTTER_API_VERSION).pc
+clutter-glx-$(CLUTTER_API_VERSION).pc: clutter-$(CLUTTER_API_VERSION).pc
 	$(QUIET_GEN)cp -f $< $(@F)
 
-pc_files += clutter-egl-$(CLUTTER_API_VERSION).pc
+pc_files += clutter-glx-$(CLUTTER_API_VERSION).pc
+
+compat_libs += \
+	libclutter-glx-$(CLUTTER_API_VERSION).so \
+	$(NULL)
 endif # SUPPORT_EGL
 
 # OSX backend rules
